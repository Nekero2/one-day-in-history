<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –¥–Ω—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
            color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #a0c4ff;
            margin-bottom: 20px;
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .cycle-info {
            font-size: 1.1rem;
            color: #a0c4ff;
        }

        .counter {
            font-size: 1.1rem;
            background: rgba(76, 175, 80, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .timer {
            font-size: 1.1rem;
            background: rgba(255, 193, 7, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .event-card {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 4px solid #4dabf7;
            position: relative;
            overflow: hidden;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.1);
        }

        .event-number {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #4dabf7;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .event-date {
            font-size: 0.9rem;
            color: #a0c4ff;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .event-title {
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .event-description {
            font-size: 1rem;
            color: #d1e3ff;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .event-link {
            display: inline-flex;
            align-items: center;
            color: #74c0fc;
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        .event-link:hover {
            color: #339af0;
        }

        .event-link svg {
            margin-left: 5px;
            width: 16px;
            height: 16px;
        }

        .controls {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #4dabf7 0%, #339af0 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(77, 171, 247, 0.4);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(77, 171, 247, 0.6);
            background: linear-gradient(135deg, #339af0 0%, #228be6 100%);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .footer {
            margin-top: 40px;
            text-align: center;
            color: #888;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .history-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #4dabf7;
        }

        .empty-state {
            text-align: center;
            padding: 60px 40px;
            color: #a0c4ff;
            font-size: 1.2rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
            
            .info-panel {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="history-icon">üìú</div>
            <h1>5 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –¥–Ω—è</h1>
            <p class="subtitle">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî 5 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏–∑ –º–∏—Ä–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–∏. –¶–∏–∫–ª –∏–∑ 20 —Å–æ–±—ã—Ç–∏–π –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 4 –¥–Ω—è.</p>
        </div>

        <div class="info-panel">
            <div class="cycle-info" id="cycleInfo">–î–µ–Ω—å 1 –∏–∑ 4 —Ü–∏–∫–ª–∞</div>
            <div class="counter" id="eventsCounter">–ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–±—ã—Ç–∏–π: 0/5</div>
            <div class="timer" id="resetTimer">–°–ª–µ–¥—É—é—â–∏–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑: 24—á 00–º</div>
        </div>

        <div class="empty-state" id="emptyState">
            <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è!</p>
        </div>

        <div class="events-grid" id="eventsGrid" style="display: none;"></div>

        <div class="controls">
            <button class="btn" id="showEventsBtn">–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–Ω—è</button>
            <button class="btn" id="newEventsBtn" style="display: none; margin-left: 15px;">–°–ª–µ–¥—É—é—â–∏–µ 5 —Å–æ–±—ã—Ç–∏–π</button>
        </div>

        <div class="footer">
            –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã Wikipedia API ‚Ä¢ –¶–∏–∫–ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:00
            <br>–í—Å–µ–≥–æ —Å–æ–±—ã—Ç–∏–π –≤ –±–∞–∑–µ: 20 ‚Ä¢ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏–∫–ª–∞: 4 –¥–Ω—è
        </div>
    </div>

    <script>
        // 20 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
        const historicalEvents = [
            {
                date: "12 —è–Ω–≤–∞—Ä—è 1755",
                title: "–û—Å–Ω–æ–≤–∞–Ω–∏–µ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞",
                description: "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –ï–ª–∏–∑–∞–≤–µ—Ç–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞ –ø–æ–¥–ø–∏—Å–∞–ª–∞ —É–∫–∞–∑ –æ–± –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–≤–æ–≥–æ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞.",
                link: "https://ru.wikipedia.org/wiki/–ú–æ—Å–∫–æ–≤—Å–∫–∏–π_—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç"
            },
            {
                date: "14 –º–∞—Ä—Ç–∞ 1879",
                title: "–†–æ–∂–¥–µ–Ω–∏–µ –ê–ª—å–±–µ—Ä—Ç–∞ –≠–π–Ω—à—Ç–µ–π–Ω–∞",
                description: "–†–æ–¥–∏–ª—Å—è —Ñ–∏–∑–∏–∫-—Ç–µ–æ—Ä–µ—Ç–∏–∫, –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∑–∏–∫–∏.",
                link: "https://ru.wikipedia.org/wiki/–≠–π–Ω—à—Ç–µ–π–Ω,_–ê–ª—å–±–µ—Ä—Ç"
            },
            {
                date: "4 –∏—é–ª—è 1776",
                title: "–î–µ–Ω—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –°–®–ê",
                description: "–ü—Ä–∏–Ω—è—Ç–∏–µ –î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –°–®–ê –æ—Ç –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏.",
                link: "https://ru.wikipedia.org/wiki/–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è_–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏_–°–®–ê"
            },
            {
                date: "9 –º–∞—è 1945",
                title: "–î–µ–Ω—å –ü–æ–±–µ–¥—ã",
                description: "–ü–æ–¥–ø–∏—Å–∞–Ω –∞–∫—Ç –æ –±–µ–∑–æ–≥–æ–≤–æ—Ä–æ—á–Ω–æ–π –∫–∞–ø–∏—Ç—É–ª—è—Ü–∏–∏ –ì–µ—Ä–º–∞–Ω–∏–∏.",
                link: "https://ru.wikipedia.org/wiki/–î–µ–Ω—å_–ü–æ–±–µ–¥—ã"
            },
            {
                date: "12 –∞–ø—Ä–µ–ª—è 1961",
                title: "–ü–µ—Ä–≤—ã–π –ø–æ–ª—ë—Ç —á–µ–ª–æ–≤–µ–∫–∞ –≤ –∫–æ—Å–º–æ—Å",
                description: "–Æ—Ä–∏–π –ì–∞–≥–∞—Ä–∏–Ω —Å–æ–≤–µ—Ä—à–∏–ª –ø–µ—Ä–≤—ã–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—ë—Ç –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.",
                link: "https://ru.wikipedia.org/wiki/–ü–µ—Ä–≤—ã–π_–ø–æ–ª—ë—Ç_—á–µ–ª–æ–≤–µ–∫–∞_–≤_–∫–æ—Å–º–æ—Å"
            },
            {
                date: "6 –∞–≤–≥—É—Å—Ç–∞ 1945",
                title: "–ê—Ç–æ–º–Ω–∞—è –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤–∫–∞ –•–∏—Ä–æ—Å–∏–º—ã",
                description: "–ü–µ—Ä–≤–æ–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞—Ç–æ–º–Ω–æ–≥–æ –æ—Ä—É–∂–∏—è –≤ –±–æ–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.",
                link: "https://ru.wikipedia.org/wiki/–ê—Ç–æ–º–Ω—ã–µ_–±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤–∫–∏_–•–∏—Ä–æ—Å–∏–º—ã_–∏_–ù–∞–≥–∞—Å–∞–∫–∏"
            },
            {
                date: "9 –Ω–æ—è–±—Ä—è 1989",
                title: "–ü–∞–¥–µ–Ω–∏–µ –ë–µ—Ä–ª–∏–Ω—Å–∫–æ–π —Å—Ç–µ–Ω—ã",
                description: "–ù–∞—á–∞–ª—Å—è –¥–µ–º–æ–Ω—Ç–∞–∂ –ë–µ—Ä–ª–∏–Ω—Å–∫–æ–π —Å—Ç–µ–Ω—ã, —Å–∏–º–≤–æ–ª–∞ —Ö–æ–ª–æ–¥–Ω–æ–π –≤–æ–π–Ω—ã.",
                link: "https://ru.wikipedia.org/wiki/–ë–µ—Ä–ª–∏–Ω—Å–∫–∞—è_—Å—Ç–µ–Ω–∞"
            },
            {
                date: "21 –∏—é–ª—è 1969",
                title: "–ü–µ—Ä–≤–∞—è –≤—ã—Å–∞–¥–∫–∞ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ –õ—É–Ω—É",
                description: "–ù–∏–ª –ê—Ä–º—Å—Ç—Ä–æ–Ω–≥ —Å—Ç—É–ø–∏–ª –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –õ—É–Ω—ã –≤ —Ö–æ–¥–µ –º–∏—Å—Å–∏–∏ ¬´–ê–ø–æ–ª–ª–æ–Ω-11¬ª.",
                link: "https://ru.wikipedia.org/wiki/–ê–ø–æ–ª–ª–æ–Ω-11"
            },
            {
                date: "7 –Ω–æ—è–±—Ä—è 1917",
                title: "–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è —Ä–µ–≤–æ–ª—é—Ü–∏—è",
                description: "–í–æ–æ—Ä—É–∂—ë–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–∏–µ –≤ –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥–µ, –ø—Ä–∏–≤–µ–¥—à–µ–µ –∫ –≤–ª–∞—Å—Ç–∏ –ø–∞—Ä—Ç–∏—é –±–æ–ª—å—à–µ–≤–∏–∫–æ–≤.",
                link: "https://ru.wikipedia.org/wiki/–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è_—Ä–µ–≤–æ–ª—é—Ü–∏—è"
            },
            {
                date: "28 –∏—é–Ω—è 1914",
                title: "–£–±–∏–π—Å—Ç–≤–æ —ç—Ä—Ü–≥–µ—Ä—Ü–æ–≥–∞ –§—Ä–∞–Ω—Ü–∞ –§–µ—Ä–¥–∏–Ω–∞–Ω–¥–∞",
                description: "–°–æ–±—ã—Ç–∏–µ, —Å—Ç–∞–≤—à–µ–µ –ø–æ–≤–æ–¥–æ–º –∫ –Ω–∞—á–∞–ª—É –ü–µ—Ä–≤–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã.",
                link: "https://ru.wikipedia.org/wiki/–£–±–∏–π—Å—Ç–≤–æ_—ç—Ä—Ü–≥–µ—Ä—Ü–æ–≥–∞_–§—Ä–∞–Ω—Ü–∞_–§–µ—Ä–¥–∏–Ω–∞–Ω–¥–∞"
            },
            {
                date: "2 —Å–µ–Ω—Ç—è–±—Ä—è 1945",
                title: "–û–∫–æ–Ω—á–∞–Ω–∏–µ –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã",
                description: "–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ç–∞ –æ –∫–∞–ø–∏—Ç—É–ª—è—Ü–∏–∏ –Ø–ø–æ–Ω–∏–∏ –Ω–∞ –±–æ—Ä—Ç—É –ª–∏–Ω–∫–æ—Ä–∞ ¬´–ú–∏—Å—Å—É—Ä–∏¬ª.",
                link: "https://ru.wikipedia.org/wiki/–ö–∞–ø–∏—Ç—É–ª—è—Ü–∏—è_–Ø–ø–æ–Ω–∏–∏"
            },
            {
                date: "11 —Å–µ–Ω—Ç—è–±—Ä—è 2001",
                title: "–¢–µ—Ä–∞–∫—Ç—ã –≤ –°–®–ê",
                description: "–°–µ—Ä–∏—è —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∏ —Ä–∞–∑—Ä—É—à–µ–Ω—ã –±–∞—à–Ω–∏ –í—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞.",
                link: "https://ru.wikipedia.org/wiki/–¢–µ—Ä–∞–∫—Ç—ã_11_—Å–µ–Ω—Ç—è–±—Ä—è_2001_–≥–æ–¥–∞"
            },
            {
                date: "20 –∏—é–ª—è 1969",
                title: "–ê–ø–æ–ª–ª–æ–Ω-11 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –õ—É–Ω—ã",
                description: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å ¬´–ê–ø–æ–ª–ª–æ–Ω-11¬ª –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ –ª—É–Ω–Ω—É—é –æ—Ä–±–∏—Ç—É.",
                link: "https://ru.wikipedia.org/wiki/–ê–ø–æ–ª–ª–æ–Ω-11"
            },
            {
                date: "1 —Å–µ–Ω—Ç—è–±—Ä—è 1939",
                title: "–ù–∞—á–∞–ª–æ –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã",
                description: "–ì–µ—Ä–º–∞–Ω–∏—è –≤—Ç–æ—Ä–≥–∞–µ—Ç—Å—è –≤ –ü–æ–ª—å—à—É, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–∞—á–∞–ª—É –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã.",
                link: "https://ru.wikipedia.org/wiki/–í—Ç–æ—Ä–∂–µ–Ω–∏–µ_–≤_–ü–æ–ª—å—à—É_(1939)"
            },
            {
                date: "22 –∏—é–Ω—è 1941",
                title: "–ù–∞—á–∞–ª–æ –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã",
                description: "–ù–∞—Ü–∏—Å—Ç—Å–∫–∞—è –ì–µ—Ä–º–∞–Ω–∏—è –Ω–∞–ø–∞–¥–∞–µ—Ç –Ω–∞ –°–æ–≤–µ—Ç—Å–∫–∏–π –°–æ—é–∑.",
                link: "https://ru.wikipedia.org/wiki/–í–µ–ª–∏–∫–∞—è_–û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è_–≤–æ–π–Ω–∞"
            },
            {
                date: "26 –∞–ø—Ä–µ–ª—è 1986",
                title: "–ê–≤–∞—Ä–∏—è –Ω–∞ –ß–µ—Ä–Ω–æ–±—ã–ª—å—Å–∫–æ–π –ê–≠–°",
                description: "–ö—Ä—É–ø–Ω–µ–π—à–∞—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∞–≤–∞—Ä–∏—è –Ω–∞ –∞—Ç–æ–º–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏.",
                link: "https://ru.wikipedia.org/wiki/–ß–µ—Ä–Ω–æ–±—ã–ª—å—Å–∫–∞—è_–∞–≤–∞—Ä–∏—è"
            },
            {
                date: "11 –Ω–æ—è–±—Ä—è 1918",
                title: "–û–∫–æ–Ω—á–∞–Ω–∏–µ –ü–µ—Ä–≤–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã",
                description: "–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –ö–æ–º–ø—å–µ–Ω—Å–∫–æ–≥–æ –ø–µ—Ä–µ–º–∏—Ä–∏—è, –∑–∞–≤–µ—Ä—à–∏–≤—à–µ–≥–æ –ü–µ—Ä–≤—É—é –º–∏—Ä–æ–≤—É—é –≤–æ–π–Ω—É.",
                link: "https://ru.wikipedia.org/wiki/–ü–µ—Ä–≤–∞—è_–º–∏—Ä–æ–≤–∞—è_—è_–≤–æ–π–Ω–∞"
            },
            {
                date: "24 –æ–∫—Ç—è–±—Ä—è 1945",
                title: "–°–æ–∑–¥–∞–Ω–∏–µ –û–û–ù",
                description: "–í—Å—Ç—É–ø–∏–ª –≤ —Å–∏–ª—É –£—Å—Ç–∞–≤ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –ù–∞—Ü–∏–π.",
                link: "https://ru.wikipedia.org/wiki/–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è_–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö_–ù–∞—Ü–∏–π"
            },
            {
                date: "3 –∞–≤–≥—É—Å—Ç–∞ 1492",
                title: "–ù–∞—á–∞–ª–æ —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏ –ö–æ–ª—É–º–±–∞",
                description: "–•—Ä–∏—Å—Ç–æ—Ñ–æ—Ä –ö–æ–ª—É–º–± –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è –≤ —ç–∫—Å–ø–µ–¥–∏—Ü–∏—é, –≤ —Ö–æ–¥–µ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –ê–º–µ—Ä–∏–∫–∞.",
                link: "https://ru.wikipedia.org/wiki/–•—Ä–∏—Å—Ç–æ—Ñ–æ—Ä_–ö–æ–ª—É–º–±"
            },
            {
                date: "19 –∏—é–ª—è 1799",
                title: "–ù–∞—Ö–æ–¥–∫–∞ –†–æ–∑–µ—Ç—Ç—Å–∫–æ–≥–æ –∫–∞–º–Ω—è",
                description: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –†–æ–∑–µ—Ç—Ç—Å–∫–æ–≥–æ –∫–∞–º–Ω—è, –ø–æ–∑–≤–æ–ª–∏–≤—à–µ–≥–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –µ–≥–∏–ø–µ—Ç—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã.",
                link: "https://ru.wikipedia.org/wiki/–†–æ–∑–µ—Ç—Ç—Å–∫–∏–π_–∫–∞–º–µ–Ω—å"
            }
        ];

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
        const EVENTS_PER_DAY = 5;
        const TOTAL_EVENTS = historicalEvents.length;
        const CYCLE_DAYS = TOTAL_EVENTS / EVENTS_PER_DAY; // 4 –¥–Ω—è

        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        function getCurrentDate() {
            return new Date().toISOString().split('T')[0];
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–Ω–µ–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
        function getDailyEvents() {
            const today = getCurrentDate();
            const lastEventDate = localStorage.getItem('lastEventDate');
            let cycleDay = parseInt(localStorage.getItem('cycleDay')) || 1;
            let usedEvents = JSON.parse(localStorage.getItem('usedEvents')) || [];
            
            // –ï—Å–ª–∏ –¥–µ–Ω—å —Å–º–µ–Ω–∏–ª—Å—è
            if (lastEventDate !== today || !lastEventDate) {
                // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å —Ü–∏–∫–ª–∞
                cycleDay = cycleDay >= CYCLE_DAYS ? 1 : cycleDay + 1;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –µ—Å–ª–∏ –Ω–∞—á–∞–ª—Å—è –Ω–æ–≤—ã–π —Ü–∏–∫–ª
                if (cycleDay === 1) {
                    usedEvents = [];
                }
                
                localStorage.setItem('lastEventDate', today);
                localStorage.setItem('cycleDay', cycleDay);
                localStorage.setItem('usedEvents', JSON.stringify(usedEvents));
            }
            
            // –í—ã–±–∏—Ä–∞–µ–º 5 —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è —Ü–∏–∫–ª–∞
            const availableEvents = historicalEvents.filter((_, index) => !usedEvents.includes(index));
            const eventsForDay = [];
            
            for (let i = 0; i < EVENTS_PER_DAY && availableEvents.length > 0; i++) {
                const randomIndex = Math.floor(Math.random() * availableEvents.length);
                eventsForDay.push(availableEvents[randomIndex]);
                const originalIndex = historicalEvents.findIndex(e => e === availableEvents[randomIndex]);
                usedEvents.push(originalIndex);
                availableEvents.splice(randomIndex, 1);
            }
            
            localStorage.setItem('usedEvents', JSON.stringify(usedEvents));
            
            return {
                events: eventsForDay,
                cycleDay: cycleDay,
                usedCount: usedEvents.length,
                totalCount: TOTAL_EVENTS
            };
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
        function updateTimer() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const diff = tomorrow - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('resetTimer').textContent = 
                `–°–ª–µ–¥—É—é—â–∏–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑: ${hours}—á ${minutes}–º`;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
        function displayEvents(dailyData) {
            const eventsGrid = document.getElementById('eventsGrid');
            const emptyState = document.getElementById('emptyState');
            const showEventsBtn = document.getElementById('showEventsBtn');
            const newEventsBtn = document.getElementById('newEventsBtn');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            emptyState.style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π
            eventsGrid.style.display = 'grid';
            eventsGrid.innerHTML = '';
            
            // –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–±—ã—Ç–∏–π
            dailyData.events.forEach((event, index) => {
                const eventCard = document.createElement('div');
                eventCard.className = 'event-card fade-in';
                eventCard.innerHTML = `
                    <div class="event-number">${index + 1}</div>
                    <div class="event-date">${event.date}</div>
                    <h3 class="event-title">${event.title}</h3>
                    <p class="event-description">${event.description}</p>
                    <a href="${event.link}" target="_blank" rel="noopener" class="event-link">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ Wikipedia
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </a>
                `;
                eventsGrid.appendChild(eventCard);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–∏–∫–ª–µ
            document.getElementById('cycleInfo').textContent = 
                `–î–µ–Ω—å ${dailyData.cycleDay} –∏–∑ ${CYCLE_DAYS} —Ü–∏–∫–ª–∞`;
            
            document.getElementById('eventsCounter').textContent = 
                `–ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–±—ã—Ç–∏–π: ${dailyData.usedCount}/${TOTAL_EVENTS}`;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π (—Ç–æ–ª—å–∫–æ –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ)
            showEventsBtn.style.display = 'none';
            newEventsBtn.style.display = 'inline-block';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            const today = getCurrentDate();
            const lastVisitDate = localStorage.getItem('lastEventDate');
            
            // –ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è
            if (lastVisitDate === today) {
                const dailyData = getDailyEvents();
                displayEvents(dailyData);
            }
            
            // –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–Ω—è"
            document.getElementById('showEventsBtn').addEventListener('click', function() {
                const dailyData = getDailyEvents();
                displayEvents(dailyData);
            });
            
            // –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∏–µ 5 —Å–æ–±—ã—Ç–∏–π" (–¥–µ–º–æ-—Ä–µ–∂–∏–º)
            document.getElementById('newEventsBtn').addEventListener('click', function() {
                // –í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
                const shuffled = [...historicalEvents].sort(() => 0.5 - Math.random());
                const demoEvents = shuffled.slice(0, EVENTS_PER_DAY);
                
                const demoData = {
                    events: demoEvents,
                    cycleDay: "–î–µ–º–æ",
                    usedCount: "‚Äî",
                    totalCount: TOTAL_EVENTS
                };
                
                displayEvents(demoData);
            });
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
            setInterval(updateTimer, 60000);
            updateTimer();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∫–∞–∑ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(() => {
                if (lastVisitDate === today) {
                    document.getElementById('showEventsBtn').click();
                }
            }, 500);
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>